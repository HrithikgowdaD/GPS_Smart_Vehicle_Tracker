{% extends "base.html" %}
{% block content %}
<h3>Developer Dashboard</h3>
<div class="row mb-3">
  <div class="col-md-3">
    <div class="card p-2">
      <h5>Total vehicles</h5>
      <h2>{{ total_vehicles }}</h2>
    </div>
  </div>
  <div class="col-md-3">
    <div class="card p-2">
      <h5>Total trips</h5>
      <h2>{{ total_trips }}</h2>
    </div>
  </div>
  <div class="col-md-3">
    <div class="card p-2">
      <h5>Total highway km</h5>
      <h2>{{ highway_sum }}</h2>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-md-6">
    <h5>Vehicles</h5>
    <table class="table">
      <thead><tr><th>Vehicle</th><th>Owner</th><th>Balance</th></tr></thead>
      <tbody>
        {% for v in vehicles %}
          <tr>
            <td>{{ v.vehicle_no }}</td>
            <td>{{ v.owner_name or v.owner_name }}</td>
            <td>{{ v.balance or 0 }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <div class="col-md-6">
    <h5>Live Map</h5>
    <div id="map" style="height:400px;border:1px solid #ddd"></div>
    <p class="mt-2">Latest pings will appear as markers. (Requires GOOGLE_MAPS_API_KEY)</p>
  </div>
</div>

<script>
  const GOOGLE_MAPS_API_KEY = "{{ google_maps_key }}";
</script>
<script src="{{ url_for('static', filename='js/dev_dashboard.js') }}"></script>
{% endblock %}
